---
title: 事件组
published: 2024-07-16
description: ''
image: ''
tags: [freeRTOS]
category: RTOS
draft: false 
---
## 事件组

### 简单事件（队列信号量等）的特征：

1. 允许一个任务阻塞等待单一事件的发生
2. 在事件发生时唤醒等待该事件的所有任务中优先级最高的**一个**任务

### 事件组

1. 允许一个任务阻塞等待混合事件的发生
2. 事件发生时，唤醒**所有**阻塞等待相同事件或事件集的任务
3. 应用
4. 同步多任务
5. 传送事件到多个任务（广播）
6. 允许一个任务阻塞等待任何事件集之一的事件或全部事件的发生
7. 允许一个任务阻塞等待多个动作完成
8. 降低应用占用的RAM
9. 通过一个事件组替代多个二值信号量

### 通过事件组同步任务

- 每一个任务必须参与同步（一个应用需要多个任务互相同步，一个任务需要其他事件（被其他任务设置）），其被赋予事件组中唯一事件bit
- 每个任务设置自己的事件bit，当同步点到达时，任务已设置过自己的事件bit，每个任务在事件组上阻塞等待事件bit
- 满足所有事件bit后，所有任务开始运行，应用：一个多步有序处理流程

### 多任务协调场景无法使用事件组API实现

设置事件bit和检测事件bit是两个单独的操作，这将会导致一种错误的情况： A、B任务设置各自的事件bit，并阻塞等待c任务的事件bit被设置，而此时c任务运行并设置自己的事件bit完成的同时，A、B任务解除阻塞，同时三个事件bit被清0，而c任务再去检查三个被清0事件bit，故同步失败