---
title: 中断
published: 2024-07-16
description: ''
image: ''
tags: [freeRTOS]
category: RTOS
draft: false 
---
## interrupt

### 问题

1. 哪些api可在中断中被使用

2. 延迟中断处理到一个任务的方法

3. 信号量

   - 利用二值信号量，延迟处理任务为最高优先级，中断中调用give（），任务中调用take（）
   - 应用计数型信号量于计数事件，资源管理

4. deamon

   - 无需为每一个中断创建单独的处理任务
   - 低灵活性：无法为每一个中断处理任务单独设置优先级，所有任务函数在deamon中运行
   - 低决定：队列中的命令会先于后面从中断中发出的命令被执行
   - 应用场景：较低资源使用、简化用户模型、回调是一个标准c回调

5. 队列（不适用于快速数据传输）

   - 更合适的方案
   - 使用DMA+直接任务通知
   - 复制每一个字符到一个线程安全RAM缓冲区+任务通知
   - 直接在中断中处理收到的数据，然后用队列将结果返回给Task

6. 如何创建和使用二值信号量和计数信号量

7. 二值信号量与计数信号量的区别

8. 怎样使用队列传递数据

   可用在中断，但高速下低效

9. 可用中断嵌套模型的场景

### 延迟处理到任务最有效的时刻

1. 必要的中断处理较为琐碎，如中断中只存储AD转换结果，而在任务中进行软件滤波
2. 方便中断处理一些不能在中断中执行的动作，如写一个控制台或分配内存