---
title: 队列
published: 2024-07-16
description: ''
image: ''
tags: [freeRTOS]
category: RTOS
draft: false 
---
### 队列

### 问题回顾

1. 如何创建一个队列
2. 一个队列如何管理包含的数据
3. 如何发送数据到队列
4. 如何从队列中读取数据
5. 在一个队列上加阻塞意味着什么

- 队列读任务阻塞：队列空
- 队列写任务阻塞：队列满
- 带超时的队列读写任务：超时时，在数据或空间可用前将任务移到就绪态
- 多读或多写

1. 如何在多队列阻塞

   使用队列集合

2. 如何覆盖队列中的数据

3. 基于队列实现的邮箱

- 邮箱为一个长度为1的队列，不传递数据，允许多任务读取，其数据只由写任务进行更新

1. 如何清除一个队列

- 调用对应的ResetAPI操作

1. 队列读写时，任务优先级的影响

- 读任务优先级>写优先级，且写任务优先级同：读任务加等待，写任务持续写
- 多写一读单队列，写优先级任务优先级（带等待）>读优先级（不带等待），写至队列满->读队列

### notice

- 系统API的应用细节问题
- 通过队列传递各类数据：基本数据类型，复合类型（结构体）变量时需要留意的问题，其中需要留意动态分配内存用于存放数据是malloc与free的使用，否则容易造成内存泄漏问题
- 如何简化代码，是代码可读性和简洁性提高
- 任务中如何进行超时等待时间的设置